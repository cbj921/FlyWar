{"version":3,"sources":["protectScript.js"],"names":["cc","Class","extends","Component","properties","UpgradeBg","Node","coinLabel","Label","coinScript","require","popUpgradeWindow","getData","showUpgradeBg","objectName","coinData","sys","localStorage","getItem","mainPlaneData","JSON","parse","levelLabel","getChildByName","getComponent","numberLabel","string","protect","level","number","cost","node","color","protectUpgradeBtn","money","Math","floor","setItem","init","updatePlaneData","stringify","showIcon","active","hideIcon","position","v2","hideUpgradeBg","onLoad"],"mappings":"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","file":"protectScript.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI脚本","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        UpgradeBg: cc.Node,\n        coinLabel: cc.Label,\n\n        coinScript: require('coinScript'),\n    },\n\n    popUpgradeWindow() {\n        // 更新各种数值\n        this.getData(\"mainPlaneObject\");\n        // 弹出升级窗口\n        this.showUpgradeBg();\n    },\n\n    /**\n     * @description: 更新数据\n     * @param {string} objectName:传入需要获取到数据的对象名\n     * @return: \n     */\n    getData(objectName) {\n        this.coinData = cc.sys.localStorage.getItem('coinData');\n        this.mainPlaneData = JSON.parse(cc.sys.localStorage.getItem(objectName));\n\n        let levelLabel = this.UpgradeBg.getChildByName(\"properyLabel\").getComponent(cc.Label);\n        let numberLabel = this.UpgradeBg.getChildByName(\"numberLabel\").getComponent(cc.Label);\n\n        levelLabel.string = `护盾值 [Lv${this.mainPlaneData.protect.level}]`;\n        numberLabel.string = this.mainPlaneData.protect.number;\n        this.coinLabel.string = this.mainPlaneData.protect.cost;\n\n        // 如果金钱比升级费用少字体就为红色\n        if (this.coinData >= this.mainPlaneData.protect.cost) {\n            this.coinLabel.node.color = cc.color(255, 255, 255, 255);\n        } else {\n            this.coinLabel.node.color = cc.color(255, 0, 0, 255);\n        }\n    },\n\n    // 这个是按键用的函数\n    protectUpgradeBtn() {\n        // 点击护盾升级按钮\n        let money = Math.floor(this.coinData - this.mainPlaneData.protect.cost);// 不能出现小数\n        if (money >= 0) {\n            // 更新金钱\n            this.coinData = money;\n            cc.sys.localStorage.setItem(\"coinData\", this.coinData);//把钱存储\n            this.coinScript.init(); // 更新金钱标签\n            // 更新战机数值\n            this.updatePlaneData();\n        }\n    },\n\n    updatePlaneData() {\n        this.mainPlaneData.protect.level++;\n        this.mainPlaneData.protect.number += 20; //每升一级加20\n        if (this.mainPlaneData.protect.level % 10 == 1) {\n            // 每升级10次额外加100\n            this.mainPlaneData.protect.number +=100;\n        }\n        this.mainPlaneData.protect.cost = Math.floor(this.mainPlaneData.protect.cost*2); //每次升级费用翻2倍 \n        cc.sys.localStorage.setItem(\"mainPlaneObject\",JSON.stringify(this.mainPlaneData));\n        this.getData(\"mainPlaneObject\"); // 更新数值\n    },\n\n    showIcon() {\n        this.node.active = true;\n    },\n    hideIcon() {\n        this.node.active = false;\n    },\n\n    showUpgradeBg() {\n        this.UpgradeBg.position = cc.v2(544, 416);\n    },\n    hideUpgradeBg() {\n        this.UpgradeBg.position = cc.v2(4000, 416); // 随意设的坐标，只要不让他显示在可见区域就行，不用node的active是因为active对性能影响较大\n    },\n\n    onLoad() {\n\n    },\n\n    // update (dt) {},\n});\n"]}