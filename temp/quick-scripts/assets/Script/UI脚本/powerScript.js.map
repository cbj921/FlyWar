{"version":3,"sources":["powerScript.js"],"names":["cc","Class","extends","Component","properties","UpgradeBg","Node","coinLabel","Label","coinScript","require","popUpgradeWindow","getData","showUpgradeBg","objectName","coinData","sys","localStorage","getItem","mainPlaneData","JSON","parse","levelLabel","getChildByName","getComponent","numberLabel","string","power","level","number","cost","node","color","powerUpgradeBtn","money","Math","floor","setItem","init","updatePlaneData","stringify","showIcon","active","hideIcon","position","v2","hideUpgradeBg","onLoad"],"mappings":"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","file":"powerScript.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI脚本","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        UpgradeBg: cc.Node,\n        coinLabel: cc.Label,\n\n        coinScript:require('coinScript'),\n    },\n\n    popUpgradeWindow() {\n        // 更新各种数值\n        this.getData(\"mainPlaneObject\");\n        // 弹出升级窗口\n        this.showUpgradeBg();\n    },\n\n    /**\n     * @description: 更新数据\n     * @param {string} objectName:传入需要获取到数据的对象名\n     * @return: \n     */\n    getData(objectName) {\n        this.coinData = cc.sys.localStorage.getItem('coinData');\n        this.mainPlaneData = JSON.parse(cc.sys.localStorage.getItem(objectName));\n\n        let levelLabel = this.UpgradeBg.getChildByName(\"properyLabel\").getComponent(cc.Label);\n        let numberLabel = this.UpgradeBg.getChildByName(\"numberLabel\").getComponent(cc.Label);\n\n        levelLabel.string = `能源值 [Lv${this.mainPlaneData.power.level}]`;\n        numberLabel.string = this.mainPlaneData.power.number;\n        this.coinLabel.string = this.mainPlaneData.power.cost;\n\n        // 如果金钱比升级费用少字体就为红色\n        if (this.coinData >= this.mainPlaneData.power.cost) {\n            this.coinLabel.node.color = cc.color(255, 255, 255, 255);\n        } else {\n            this.coinLabel.node.color = cc.color(255, 0, 0, 255);\n        }\n    },\n\n    // 这个是按键用的函数\n    powerUpgradeBtn() {\n        // 点击能源升级按钮\n        let money = Math.floor(this.coinData - this.mainPlaneData.power.cost);// 不能出现小数\n        if (money >= 0) {\n            // 更新金钱\n            this.coinData = money;\n            cc.sys.localStorage.setItem(\"coinData\", this.coinData);//把钱存储\n            this.coinScript.init(); // 更新金钱标签\n            // 更新战机数值\n            this.updatePlaneData();\n        }\n    },\n\n    updatePlaneData() {\n        this.mainPlaneData.power.level++;\n        this.mainPlaneData.power.number += 15; //每升一级加15\n        if (this.mainPlaneData.power.level % 10 == 1) {\n            // 每升级10次额外加30\n            this.mainPlaneData.power.number +=30;\n        }\n        this.mainPlaneData.power.cost = Math.floor(this.mainPlaneData.power.cost*2); //每次升级费用翻2倍 \n        cc.sys.localStorage.setItem(\"mainPlaneObject\",JSON.stringify(this.mainPlaneData));\n        this.getData(\"mainPlaneObject\"); // 更新数值\n    },\n\n    showIcon(){\n        this.node.active = true;\n    },\n    hideIcon(){\n        this.node.active = false;\n    },\n\n    showUpgradeBg(){\n        this.UpgradeBg.position = cc.v2(544, 416);\n    },\n    hideUpgradeBg(){\n        this.UpgradeBg.position = cc.v2(4000, 416); // 随意设的坐标，只要不让他显示在可见区域就行，不用node的active是因为active对性能影响较大\n    },\n\n    onLoad() {\n\n    },\n\n    // update (dt) {},\n});\n"]}