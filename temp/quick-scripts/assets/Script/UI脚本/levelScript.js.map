{"version":3,"sources":["levelScript.js"],"names":["cc","Class","extends","Component","properties","initLevelData","levelData","JSON","parse","sys","localStorage","getItem","level","enemyNumber","enmeyProportion","UFOProportion","rocketProportion","waveRobotProportion","spacePlaneProportion","throwRobotProportion","heavyPlaneProportion","setItem","stringify","getAllEnemyData","UFOData","rocketData","waveRobotData","spacePlaneData","updateLevelData","onLoad","label","node","getComponent","Label","onEnable","string"],"mappings":"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","file":"levelScript.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\UI脚本","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    initLevelData(){\n        this.levelData = JSON.parse(cc.sys.localStorage.getItem(\"levelData\")); // 获取全局对象\n        if (this.levelData == null) {\n            this.levelData = {\n                level:1,\n                enemyNumber:10,\n                enmeyProportion:{\n                    UFOProportion:0.7,// ufo比例\n                    rocketProportion:0.3,\n                    waveRobotProportion:0,\n                    spacePlaneProportion:0,\n                    throwRobotProportion:0,\n                    heavyPlaneProportion:0,\n                }\n            };\n            cc.sys.localStorage.setItem(\"levelData\", JSON.stringify(this.levelData));\n            this.levelData = JSON.parse(cc.sys.localStorage.getItem(\"levelData\")); // 获取全局对象\n        } // 初始化数据\n        this.getAllEnemyData();\n        return this.levelData;\n    },\n\n    getAllEnemyData() {\n        // 获取到所有敌人数据\n        this.UFOData = JSON.parse(cc.sys.localStorage.getItem(\"UFOObject\"));\n        this.rocketData = JSON.parse(cc.sys.localStorage.getItem(\"rocketObject\"));\n        this.waveRobotData = JSON.parse(cc.sys.localStorage.getItem(\"waveRobotObject\"));\n        this.spacePlaneData = JSON.parse(cc.sys.localStorage.getItem(\"spacePlaneObject\"));\n    },\n\n    updateLevelData(){\n        // 成功通关后更新关卡数据\n        this.levelData = JSON.parse(cc.sys.localStorage.getItem(\"levelData\"));\n        this.levelData.level++;\n        this.levelData.enemyNumber += 5;\n        // 以下是更新敌人的比例\n        if(this.levelData.level <=5){\n            //前5关的比例\n            this.levelData.enmeyProportion = {\n                UFOProportion:0.7,// ufo比例\n                rocketProportion:0.3,\n                waveRobotProportion:0,\n                spacePlaneProportion:0,\n                throwRobotProportion:0,\n                heavyPlaneProportion:0,\n            }\n        }\n        if(this.levelData.level >5 && this.levelData.level <=10){\n            // 6-10关的比例\n            this.levelData.enmeyProportion = {\n                UFOProportion:0.3,// ufo比例\n                rocketProportion:0.2,\n                waveRobotProportion:0.3,\n                spacePlaneProportion:0,\n                throwRobotProportion:0.2,\n                heavyPlaneProportion:0,\n            }\n        }\n        if(this.levelData.level >10 ){\n            // 大于11关后的比例\n            this.levelData.enmeyProportion = {\n                UFOProportion:0.1,// ufo比例\n                rocketProportion:0.1,\n                waveRobotProportion:0.1,\n                spacePlaneProportion:0.2,\n                throwRobotProportion:0.2,\n                heavyPlaneProportion:0.3,\n            }\n        }\n        // 以下是更新敌人的属性\n        // TODO: 更新敌人属性\n        ////////////////////\n        cc.sys.localStorage.setItem(\"levelData\", JSON.stringify(this.levelData));\n    },\n\n    onLoad () {\n        this.initLevelData();//初始化关卡数据\n        this.label = this.node.getComponent(cc.Label);\n    },\n\n    onEnable(){\n        this.label.string = `第${this.levelData.level}关`\n    },\n\n    // update (dt) {},\n});\n"]}