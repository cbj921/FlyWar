{"version":3,"sources":["gameControl.js"],"names":["cc","Class","extends","Component","properties","coinScript","require","strengthScript","protectButton","powerButton","mainWeaponButton","subWeaponButton","mainPlane","enemyControl","levelScript","startButton","Node","grainGunBtn","laserGunBtn","powerBar","init","showIcon","initEnemyData","strengthData","initData","getCollisionManager","startGame","hideIcon","hideUpgradeBg","startFly","manager","director","enabled","active","closeCoinSelfGrow","coinSelfGrow","strengthSelfGrow","opengetStrength","initLevelData","failBack","clearAllEnemy","log","onLoad","node","on","update","dt"],"mappings":"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","file":"gameControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n// 储存数据的键值：\n//  “protectObject” : 护盾的数值\n//  “powerObject”： 能源的数值\n//  “mainWeaponObject”： 主武器的数值\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        coinScript: require(\"coinScript\"),\n        strengthScript: require(\"strengthScript\"),\n        protectButton: require('protectScript'),\n        powerButton: require('powerScript'),\n        mainWeaponButton: require('mainWeaponScript'),\n        subWeaponButton: require('subWeaponScript'),\n        mainPlane: require(\"mainPlane\"),\n        enemyControl: require('enemyControl'),\n        levelScript: require('levelScript'),\n        startButton: cc.Node,\n        grainGunBtn:cc.Node,\n        laserGunBtn:cc.Node,\n        powerBar:cc.Node,\n    },\n\n\n    init() {\n        this.showIcon();\n        this.mainPlane.init();\n        this.enemyControl.initEnemyData();\n        this.enemyControl.init();\n        this.strengthData = this.strengthScript.init();// 获取体力数据\n    },\n\n    initData() {\n        this.getCollisionManager();// 开启碰撞检测\n        this.mainPlane.initData();\n        this.subWeaponButton.initData();\n    },\n\n    startGame() {\n        if(this.strengthData>=5){\n            this.hideIcon();\n            this.hideUpgradeBg();\n            this.enemyControl.startGame();\n            this.mainPlane.startFly();\n        }\n    },\n\n    getCollisionManager() {\n        //获取碰撞检测系统\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        //manager.enabledDebugDraw = true;\n    },\n\n    hideIcon() {\n        this.startButton.active = false;\n        this.protectButton.hideIcon();\n        this.powerButton.hideIcon();\n        this.mainWeaponButton.hideIcon();\n        this.subWeaponButton.hideIcon();\n        this.strengthScript.hideIcon();\n        this.coinScript.closeCoinSelfGrow(); // 关闭金币自增长\n        this.powerBar.active = true;\n        this.grainGunBtn.active = true;\n        this.laserGunBtn.active = true;\n    },\n\n    showIcon() {\n        this.startButton.active = true;\n        this.coinScript.init();\n        this.coinScript.coinSelfGrow(); // 开启金币自增长\n        this.strengthScript.init();\n        this.strengthScript.strengthSelfGrow(); // 开启体力自增长\n        this.strengthScript.opengetStrength();//要放在体力初始化的下面\n        this.protectButton.showIcon();\n        this.powerButton.showIcon();\n        this.mainWeaponButton.showIcon();\n        this.subWeaponButton.showIcon();\n        this.levelScript.initLevelData();\n        this.powerBar.active = false;\n        this.grainGunBtn.active = false;\n        this.laserGunBtn.active = false;\n    },\n\n    hideUpgradeBg() {\n        this.protectButton.hideUpgradeBg();\n        this.powerButton.hideUpgradeBg();\n        this.mainWeaponButton.hideUpgradeBg();\n        this.subWeaponButton.hideUpgradeBg();\n    },\n\n    failBack() {\n        // 通关失败后的回调函数\n        this.init();\n        this.enemyControl.clearAllEnemy();\n        cc.log(\"fail\");\n    },\n\n\n    // 按键调用到这里结束\n    onLoad() {\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        this.initData();\n        this.init();\n        this.node.on(\"fail\", this.failBack, this);\n        //cc.sys.localStorage.removeItem('coinData');\n        //cc.sys.localStorage.removeItem('UFOObject');\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        //cc.sys.localStorage.removeItem('spacePlaneObject');\n        //cc.sys.localStorage.removeItem('lastTime');\n    },\n\n    update(dt) { },\n});\n"]}