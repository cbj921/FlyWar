{"version":3,"sources":["gameControl.js"],"names":["cc","Class","extends","Component","properties","coinScript","require","strengthScript","protectButton","powerButton","mainWeaponButton","subWeaponButton","mainPlane","enemyControl","levelScript","startButton","Node","init","showIcon","initEnemyData","strengthData","initData","getCollisionManager","startGame","hideIcon","hideUpgradeBg","startFly","manager","director","enabled","active","closeCoinSelfGrow","coinSelfGrow","strengthSelfGrow","opengetStrength","initLevelData","failBack","clearAllEnemy","log","onLoad","node","on","update","dt"],"mappings":"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","file":"gameControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n// 储存数据的键值：\n//  “protectObject” : 护盾的数值\n//  “powerObject”： 能源的数值\n//  “mainWeaponObject”： 主武器的数值\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        coinScript: require(\"coinScript\"),\n        strengthScript: require(\"strengthScript\"),\n        protectButton: require('protectScript'),\n        powerButton: require('powerScript'),\n        mainWeaponButton: require('mainWeaponScript'),\n        subWeaponButton: require('subWeaponScript'),\n        mainPlane: require(\"mainPlane\"),\n        enemyControl: require('enemyControl'),\n        levelScript: require('levelScript'),\n        startButton: cc.Node,\n    },\n\n\n    init() {\n        this.showIcon();\n        this.mainPlane.init();\n        this.enemyControl.initEnemyData();\n        this.enemyControl.init();\n        this.strengthData = this.strengthScript.init();// 获取体力数据\n    },\n\n    initData() {\n        this.getCollisionManager();// 开启碰撞检测\n        this.mainPlane.initData();\n        this.subWeaponButton.initData();\n    },\n\n    startGame() {\n        if(this.strengthData>=5){\n            this.hideIcon();\n            this.hideUpgradeBg();\n            this.enemyControl.startGame();\n            this.mainPlane.startFly();\n        }\n    },\n\n    getCollisionManager() {\n        //获取碰撞检测系统\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        //manager.enabledDebugDraw = true;\n    },\n\n    hideIcon() {\n        this.startButton.active = false;\n        this.protectButton.hideIcon();\n        this.powerButton.hideIcon();\n        this.mainWeaponButton.hideIcon();\n        this.subWeaponButton.hideIcon();\n        this.strengthScript.hideIcon();\n        this.coinScript.closeCoinSelfGrow(); // 关闭金币自增长\n    },\n\n    showIcon() {\n        this.startButton.active = true;\n        this.coinScript.init();\n        this.coinScript.coinSelfGrow(); // 开启金币自增长\n        this.strengthScript.init();\n        this.strengthScript.strengthSelfGrow(); // 开启体力自增长\n        this.strengthScript.opengetStrength();//要放在体力初始化的下面\n        this.protectButton.showIcon();\n        this.powerButton.showIcon();\n        this.mainWeaponButton.showIcon();\n        this.subWeaponButton.showIcon();\n        this.levelScript.initLevelData();\n    },\n\n    hideUpgradeBg() {\n        this.protectButton.hideUpgradeBg();\n        this.powerButton.hideUpgradeBg();\n        this.mainWeaponButton.hideUpgradeBg();\n        this.subWeaponButton.hideUpgradeBg();\n    },\n\n    failBack() {\n        // 通关失败后的回调函数\n        this.init();\n        this.enemyControl.clearAllEnemy();\n        cc.log(\"fail\");\n    },\n\n\n    // 按键调用到这里结束\n    onLoad() {\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        this.initData();\n        this.init();\n        this.node.on(\"fail\", this.failBack, this);\n        //cc.sys.localStorage.removeItem('coinData');\n        //cc.sys.localStorage.removeItem('UFOObject');\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        //cc.sys.localStorage.removeItem('spacePlaneObject');\n        //cc.sys.localStorage.removeItem('lastTime');\n    },\n\n    update(dt) { },\n});\n"]}