{"version":3,"sources":["gameControl.js"],"names":["cc","Class","extends","Component","properties","coinScript","require","strengthScript","protectButton","powerButton","mainWeaponButton","subWeaponButton","mainPlane","enemyControl","levelScript","startButton","Node","grainGunBtn","laserGunBtn","powerBar","init","showIcon","initEnemyData","strengthData","musicFlag","initData","getCollisionManager","startGame","hideIcon","hideUpgradeBg","startFly","manager","director","enabled","active","closeCoinSelfGrow","coinSelfGrow","strengthSelfGrow","opengetStrength","initLevelData","failBack","popFailButton","log","succeedBack","updateLevelData","succeedEvent","musicButton","node","getComponent","AudioSource","pause","play","onLoad","on","update","dt"],"mappings":"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","file":"gameControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n// 储存数据的键值：\n//  “protectObject” : 护盾的数值\n//  “powerObject”： 能源的数值\n//  “mainWeaponObject”： 主武器的数值\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        coinScript: require(\"coinScript\"),\n        strengthScript: require(\"strengthScript\"),\n        protectButton: require('protectScript'),\n        powerButton: require('powerScript'),\n        mainWeaponButton: require('mainWeaponScript'),\n        subWeaponButton: require('subWeaponScript'),\n        mainPlane: require(\"mainPlane\"),\n        enemyControl: require('enemyControl'),\n        levelScript: require('levelScript'),\n        startButton: cc.Node,\n        grainGunBtn:cc.Node,\n        laserGunBtn:cc.Node,\n        powerBar:cc.Node,\n    },\n\n\n    init() {\n        this.showIcon();\n        this.mainPlane.init();\n        this.enemyControl.initEnemyData();\n        this.enemyControl.init();\n        this.strengthData = this.strengthScript.init();// 获取体力数据\n        this.musicFlag = 0;//音乐播放flag\n    },\n\n    initData() {\n        this.getCollisionManager();// 开启碰撞检测\n        this.coinScript.init();\n        this.mainPlane.initData();\n        this.subWeaponButton.initData();\n    },\n\n    startGame() {\n        if(this.strengthData>=5){\n            this.hideIcon();\n            this.hideUpgradeBg();\n            this.enemyControl.startGame();\n            this.mainPlane.startFly();\n        }\n    },\n\n    getCollisionManager() {\n        //获取碰撞检测系统\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        //manager.enabledDebugDraw = true;\n    },\n\n    hideIcon() {\n        this.startButton.active = false;\n        this.protectButton.hideIcon();\n        this.powerButton.hideIcon();\n        this.mainWeaponButton.hideIcon();\n        this.subWeaponButton.hideIcon();\n        this.strengthScript.hideIcon();\n        this.coinScript.hideIcon();\n        this.coinScript.closeCoinSelfGrow(); // 关闭金币自增长\n        this.powerBar.active = true;\n        this.grainGunBtn.active = true;\n        this.laserGunBtn.active = true;\n    },\n\n    showIcon() {\n        this.startButton.active = true;\n        this.coinScript.init();\n        this.coinScript.coinSelfGrow(); // 开启金币自增长\n        this.strengthScript.init();\n        this.strengthScript.strengthSelfGrow(); // 开启体力自增长\n        this.strengthScript.opengetStrength();//要放在体力初始化的下面\n        this.protectButton.showIcon();\n        this.powerButton.showIcon();\n        this.mainWeaponButton.showIcon();\n        this.subWeaponButton.showIcon();\n        this.levelScript.initLevelData();\n        this.powerBar.active = false;\n        this.grainGunBtn.active = false;\n        this.laserGunBtn.active = false;\n    },\n\n    hideUpgradeBg() {\n        this.protectButton.hideUpgradeBg();\n        this.powerButton.hideUpgradeBg();\n        this.mainWeaponButton.hideUpgradeBg();\n        this.subWeaponButton.hideUpgradeBg();\n    },\n\n    failBack() {\n        // 通关失败后的回调函数\n        this.mainPlane.init();\n        this.enemyControl.popFailButton();\n        cc.log('fail');\n    },\n    succeedBack(){\n        this.levelScript.updateLevelData();\n        this.mainPlane.succeedEvent();\n        this.init();\n        cc.log('succeed');\n    },\n\n    musicButton(){\n        if(this.musicFlag == 0){\n            this.musicFlag = 1;\n            this.node.getComponent(cc.AudioSource).pause();\n        }else {\n            this.musicFlag = 0;\n            this.node.getComponent(cc.AudioSource).play();\n        }\n    },\n\n    onLoad() {\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        this.initData();\n        this.init();\n        this.node.on(\"fail\", this.failBack, this);\n        this.node.on('succeed',this.succeedBack,this);\n        //cc.sys.localStorage.removeItem('coinData');\n        //cc.sys.localStorage.removeItem('UFOObject');\n        //cc.sys.localStorage.removeItem('mainPlaneObject');\n        //cc.sys.localStorage.removeItem('spacePlaneObject');\n        //cc.sys.localStorage.removeItem('levelData');\n    },\n\n    update(dt) { },\n});\n"]}