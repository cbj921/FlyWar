{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\mainPlane.js"],"names":["cc","Class","extends","Component","properties","endPosY","moveSpeed","moveLimit","startHealth","startBulletSpeed","startAttack","startPower","healthBar","ProgressBar","bullet","Prefab","grainGunBullet","laserGunBullet","strengthLabel","Node","powerBar","init","node","setPosition","v2","Canvas","parent","initData","mainPlaneObject","JSON","parse","sys","localStorage","getItem","protect","level","number","cost","mainWeapon","attackNumber","speedNumber","attackLevel","speedLevel","attackCost","speedCost","power","subWeapon","grainGun","powerCost","laserGun","setItem","stringify","varHealth","powerNumber","startFly","flyAction","moveTo","easing","easeCubicActionOut","runAction","initHealthBar","initPowerBar","registerPlaneControlEvent","creatBullet","getAllEnemyData","isMoving","startTouchBack","event","touches","getTouches","touchLoc","getLocation","moveToPos","convertToNodeSpaceAR","moveTouchBack","endTouchBack","on","EventType","TOUCH_START","TOUCH_MOVE","TOUCH_END","offTouchEventRegister","off","updatePlanePos","dt","oldPos","position","direction","sub","normalize","distance","mag","add","mul","progress","updateHealthBar","ratio","failEvent","emit","unscheduleAllCallbacks","succeedEvent","updatePowerBar","useGrainGun","grainBulletInit","useLaserGun","laserBulletInit","grainPool","undefined","NodePool","initCount","i","instantiate","put","rightBulletCallback","size","get","x","y","grainBulletAction","leftBulletCallback","schedule","bulletNode","offset","duration","moveAction","finished","callFunc","destroy","shootAction","sequence","laserPool","laserBulletAction","backAction","moveBy","UFOData","rocketData","waveRobotData","spacePlaneData","throwRobotData","heavyPlaneData","bulletInit","bulletPrefab","bulletPool","bulletCallback","bulletAction","onCollisionEnter","other","self","tag","impactAttack","bulletAttack","update","onLoad"],"mappings":"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","file":"mainPlane.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\n//每次升级才要存储新的数据，其余时候只要读取就好 \n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        endPosY: 0,\n        moveSpeed: 0,\n        moveLimit: 0, //移动的临界点\n\n        startHealth: 0,\n        startBulletSpeed: 0,\n        startAttack: 0,\n        startPower: 0,\n        healthBar: cc.ProgressBar,\n        bullet: [cc.Prefab],\n        grainGunBullet:cc.Prefab,\n        laserGunBullet:cc.Prefab,\n        strengthLabel:cc.Node,\n        powerBar:cc.ProgressBar,\n\n        //enemyScript:require('enemyControl'),\n    },\n\n    init() {\n        this.node.setPosition(cc.v2(0, -1760));\n        this.Canvas = this.node.parent;\n    },\n\n    initData() {\n        this.mainPlaneObject = JSON.parse(cc.sys.localStorage.getItem(\"mainPlaneObject\")); // 获取全局对象\n        if (this.mainPlaneObject == null) {\n            this.mainPlaneObject = {\n                protect: {\n                    level: 1,\n                    number: this.startHealth,\n                    cost: 100,\n                },\n                mainWeapon: {\n                    attackNumber: this.startAttack,\n                    speedNumber: this.startBulletSpeed,\n                    attackLevel: 1,\n                    speedLevel: 1,\n                    attackCost: 100,\n                    speedCost: 100,\n                },\n                power: {\n                    level: 1,\n                    number: this.startPower,\n                    cost: 150,\n                },\n                subWeapon:{\n                    grainGun: {\n                        attackNumber: 2,\n                        speedNumber: 5,\n                        attackLevel: 1,\n                        attackCost: 100,\n                        powerCost:10,\n                    },\n                    laserGun: {\n                        attackNumber: 20,\n                        speedNumber: 1,\n                        attackLevel: 1,\n                        attackCost: 200,\n                        powerCost:20,\n                    },\n                },\n            };\n            cc.sys.localStorage.setItem(\"mainPlaneObject\", JSON.stringify(this.mainPlaneObject));\n            this.mainPlaneObject = JSON.parse(cc.sys.localStorage.getItem(\"mainPlaneObject\")); // 获取全局对象\n        } // 初始化数据\n        this.varHealth = this.mainPlaneObject.protect.number; // 因为血量在游戏的时候会一直变化，所以用一个中间值来在游戏中进行改变\n        this.powerNumber = this.mainPlaneObject.power.number; // 能量同理\n    },\n\n    startFly() {\n        // 飞到指定位置\n        let flyAction = cc.moveTo(1, cc.v2(0, this.endPosY)).easing(cc.easeCubicActionOut());\n        this.node.runAction(flyAction);\n        this.initHealthBar();\n        this.initPowerBar();//初始化能量条\n        this.registerPlaneControlEvent();\n        this.creatBullet();\n        this.getAllEnemyData(); // 获取所有敌人数据\n    },\n\n    registerPlaneControlEvent() {\n        this.isMoving = false; // 记录单机事件是否在移动\n\n        this.startTouchBack = (event) => {\n            // 回调函数\n            let touches = event.getTouches();\n            let touchLoc = touches[0].getLocation(); // 获取到第一个触摸点的坐标\n            this.isMoving = true; // 正在移动标志位\n            this.moveToPos = this.Canvas.convertToNodeSpaceAR(touchLoc);\n        }\n        this.moveTouchBack = (event) => {\n            let touches = event.getTouches();\n            let touchLoc = touches[0].getLocation();\n            this.moveToPos = this.Canvas.convertToNodeSpaceAR(touchLoc);\n        }\n        this.endTouchBack = (event) => {\n            this.isMoving = false;\n        }\n\n        this.Canvas.on(cc.Node.EventType.TOUCH_START, this.startTouchBack, this.node);\n        this.Canvas.on(cc.Node.EventType.TOUCH_MOVE, this.moveTouchBack, this.node);\n        this.Canvas.on(cc.Node.EventType.TOUCH_END, this.endTouchBack, this.node);\n    },\n\n    offTouchEventRegister(){\n        this.Canvas.off(cc.Node.EventType.TOUCH_START, this.startTouchBack, this.node);\n        this.Canvas.off(cc.Node.EventType.TOUCH_MOVE, this.moveTouchBack, this.node);\n        this.Canvas.off(cc.Node.EventType.TOUCH_END, this.endTouchBack, this.node);\n    },\n\n    updatePlanePos(dt) {\n        if (!this.isMoving) {\n            return;\n        }else{\n            let oldPos = this.node.position;\n            let direction = this.moveToPos.sub(oldPos).normalize();// 获得移动方向\n            let distance = this.moveToPos.sub(oldPos).mag(); // 获得向量的长度\n            if (distance > this.moveLimit) {\n                this.node.setPosition(oldPos.add(direction.mul(this.moveSpeed * dt)));\n            }\n        }\n\n    },\n\n    initHealthBar() {\n        // 更新血条，让血回满\n        // 初始化血量\n        this.varHealth = this.mainPlaneObject.protect.number;\n        this.healthBar.progress = 1;\n    },\n    updateHealthBar() {\n        let ratio = this.varHealth / this.mainPlaneObject.protect.number;\n        this.healthBar.progress = ratio;\n        if (ratio == 0) {\n            this.failEvent();\n        }\n    },\n\n    failEvent() {\n        this.offTouchEventRegister();\n        this.isMoving = 0; // 让移动标志位为0,如果不这样，飞机归位后还会飞出来\n        this.initHealthBar();// 让血回满，就不会一直发射事件\n        this.strengthLabel.emit('fail');// 给strengthLabel发送失败事件\n        this.Canvas.emit(\"fail\"); // 给canvas 发送失败事件\n        this.unscheduleAllCallbacks();// 关闭所有子弹发射\n    },\n    succeedEvent(){\n        this.offTouchEventRegister();\n        this.isMoving = 0; // 让移动标志位为0,如果不这样，飞机归位后还会飞出来\n        this.unscheduleAllCallbacks();// 关闭所有子弹发射\n    },\n\n    initPowerBar(){\n        this.powerNumber = this.mainPlaneObject.power.number; \n        this.powerBar.progress = 1;\n    },\n    updatePowerBar(){\n        // 更新能量条\n        let ratio = this.powerNumber / this.mainPlaneObject.power.number;\n        this.powerBar.progress = ratio;\n    },\n    // 副武器按键函数\n    useGrainGun(){\n        if(this.powerNumber>=this.mainPlaneObject.subWeapon.grainGun.powerCost){\n            this.powerNumber -= this.mainPlaneObject.subWeapon.grainGun.powerCost;\n            this.grainBulletInit();\n        }\n    },\n    useLaserGun(){\n        if(this.powerNumber>=this.mainPlaneObject.subWeapon.laserGun.powerCost){\n            this.powerNumber -= this.mainPlaneObject.subWeapon.laserGun.powerCost;\n            this.laserBulletInit();\n        }\n    },\n    // 以下粒子枪子弹\n    grainBulletInit(){\n        if(this.grainPool == undefined){\n            // 对象池不存在我们才新建\n            this.grainPool = new cc.NodePool();\n            let initCount = 20;\n            for (let i = 0; i < initCount; i++) {\n                let bullet = cc.instantiate(this.grainGunBullet);\n                this.grainPool.put(bullet);\n            }\n        }\n        //\n        let rightBulletCallback = () => {\n            let bullet = null;\n            if (this.grainPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n                bullet = this.grainPool.get();\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n                bullet = cc.instantiate(this.grainGunBullet);\n            }\n            bullet.parent = this.node.parent; // 将生成的子弹加入canvas节点\n            bullet.position = cc.v2(this.node.x + 125, this.node.y); // 放在飞机右边\n            this.grainBulletAction(bullet,125);\n        };\n        let leftBulletCallback = () => {\n            let bullet = null;\n            if (this.grainPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n                bullet = this.grainPool.get();\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n                bullet = cc.instantiate(this.grainGunBullet);\n            }\n            bullet.parent = this.node.parent; // 将生成的子弹加入canvas节点\n            bullet.position = cc.v2(this.node.x - 125, this.node.y); // 放在飞机右边\n            this.grainBulletAction(bullet,-125);\n        };\n\n        this.schedule(rightBulletCallback,1 / (this.mainPlaneObject.subWeapon.grainGun.speedNumber),15);\n        this.schedule(leftBulletCallback,1 / (this.mainPlaneObject.subWeapon.grainGun.speedNumber),15);\n\n    },\n    grainBulletAction(bulletNode,offset) {\n        let duration = (1100 - this.node.y) / 2000;  // 计算时间，这样不管在哪个位置发射子弹速度都一样了\n        this.moveAction = cc.moveTo(duration, cc.v2(this.node.x+offset, 1100)); // 初始位置是0\n        this.finished = cc.callFunc(() => {\n            if (this.grainPool == null) {\n                bulletNode.destroy();  //因为飞机没了后，对象池也没了,所以把剩下的子弹销毁\n            } else {\n                this.grainPool.put(bulletNode);\n            }\n        });\n        let shootAction = cc.sequence(this.moveAction, this.finished);\n        bulletNode.runAction(shootAction);\n    },\n    // 以下是镭射枪子弹\n    laserBulletInit(){\n        if(this.laserPool == undefined){\n            this.laserPool = new cc.NodePool();\n            let initCount = 10;\n            for (let i = 0; i < initCount; i++) {\n                let bullet = cc.instantiate(this.laserGunBullet);\n                this.laserPool.put(bullet);\n            }\n        }\n        let rightBulletCallback = () => {\n            let bullet = null;\n            if (this.laserPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n                bullet = this.laserPool.get();\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n                bullet = cc.instantiate(this.laserGunBullet);\n            }\n            bullet.parent = this.node.parent; // 将生成的子弹加入canvas节点\n            bullet.position = cc.v2(this.node.x + 125, this.node.y); // 放在飞机右边\n            this.laserBulletAction(bullet,125);\n        };\n        let leftBulletCallback = () => {\n            let bullet = null;\n            if (this.laserPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n                bullet = this.laserPool.get();\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n                bullet = cc.instantiate(this.laserGunBullet);\n            }\n            bullet.parent = this.node.parent; // 将生成的子弹加入canvas节点\n            bullet.position = cc.v2(this.node.x - 125, this.node.y); // 放在飞机右边\n            this.laserBulletAction(bullet,-125);\n        };\n        this.schedule(rightBulletCallback,1 / (this.mainPlaneObject.subWeapon.laserGun.speedNumber),4,0.5);\n        this.schedule(leftBulletCallback,1 / (this.mainPlaneObject.subWeapon.laserGun.speedNumber),4);\n    },\n    laserBulletAction(bulletNode,offset){\n        let duration = (1100 - this.node.y) / 1000;  // 计算时间，这样不管在哪个位置发射子弹速度都一样了\n        let backAction = cc.moveBy(0.5,cc.v2(0,-50)); // 往后退的动作\n        this.moveAction = cc.moveTo(duration, cc.v2(this.node.x+offset, 1100)); // 初始位置是0\n        this.finished = cc.callFunc(() => {\n            if (this.laserPool == null) {\n                bulletNode.destroy();  //因为飞机没了后，对象池也没了,所以把剩下的子弹销毁\n            } else {\n                this.laserPool.put(bulletNode);\n            }\n        });\n        let shootAction = cc.sequence(backAction,this.moveAction, this.finished);\n        bulletNode.runAction(shootAction);\n    },\n///////////////////////\n    getAllEnemyData() {\n        // 获取到所有敌人数据\n        this.UFOData = JSON.parse(cc.sys.localStorage.getItem(\"UFOObject\"));\n        this.rocketData = JSON.parse(cc.sys.localStorage.getItem(\"rocketObject\"));\n        this.waveRobotData = JSON.parse(cc.sys.localStorage.getItem(\"waveRobotObject\"));\n        this.spacePlaneData = JSON.parse(cc.sys.localStorage.getItem(\"spacePlaneObject\"));\n        this.throwRobotData = JSON.parse(cc.sys.localStorage.getItem(\"throwRobotObject\"));\n        this.heavyPlaneData = JSON.parse(cc.sys.localStorage.getItem(\"heavyPlaneObject\"));\n        //获取到其他敌人\n        //。。。。\n\n        //cc.log(this.UFOData);\n    },\n\n    bulletInit(bulletPrefab) {\n        this.bulletPool = new cc.NodePool();\n        let initCount = 15;\n        for (let i = 0; i < initCount; i++) {\n            let bullet = cc.instantiate(bulletPrefab);\n            this.bulletPool.put(bullet);\n        }\n        \n    },\n\n    creatBullet() {\n        this.bulletCallback = () => {\n            let bullet = null;\n            if (this.bulletPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\n                bullet = this.bulletPool.get();\n            } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n                bullet = cc.instantiate(this.bullet[0]);\n            }\n            bullet.parent = this.node.parent; // 将生成的子弹加入canvas节点\n            bullet.position = cc.v2(this.node.x, this.node.y);\n            this.bulletAction(bullet);\n        };\n        this.schedule(this.bulletCallback, 1 / (this.mainPlaneObject.mainWeapon.speedNumber / 10));//\n\n    },\n\n    bulletAction(bulletNode) {\n        let duration = (1100 - this.node.y) / 1200;  // 计算时间，这样不管在哪个位置发射子弹速度都一样了\n        this.moveAction = cc.moveTo(duration, cc.v2(this.node.x, 1100)); // 初始位置是0\n        this.finished = cc.callFunc(() => {\n            if (this.bulletPool == null) {\n                bulletNode.destroy();  //因为飞机没了后，对象池也没了,所以把剩下的子弹销毁\n            } else {\n                this.bulletPool.put(bulletNode);\n            }\n        });\n        let shootAction = cc.sequence(this.moveAction, this.finished);\n        bulletNode.runAction(shootAction);\n    },\n\n    /**\n* 当碰撞产生的时候调用\n* @param  {Collider} other 产生碰撞的另一个碰撞组件\n* @param  {Collider} self  产生碰撞的自身的碰撞组件\n*/\n    onCollisionEnter(other, self) {\n        if (other.tag == 0) {\n            //tag==0表示碰到飞碟\n            this.varHealth = this.varHealth - this.UFOData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 1) {\n            //tag==1表示碰到飞碟子弹\n            this.varHealth = this.varHealth - this.UFOData.bulletAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 2) {\n            //tag==2表示碰到火箭\n            this.varHealth = this.varHealth - this.rocketData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 3) {\n            //tag==3表示碰到波动机器人\n            this.varHealth = this.varHealth - this.waveRobotData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 4) {\n            //tag==4表示碰到波动机器人子弹\n            this.varHealth = this.varHealth - this.waveRobotData.bulletAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 5) {\n            //tag==5表示碰到深空飞机\n            this.varHealth = this.varHealth - this.spacePlaneData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if (other.tag == 6) {\n            //tag==6表示碰到深空飞机子弹\n            this.varHealth = this.varHealth - this.spacePlaneData.bulletAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if(other.tag == 7){\n            //tag==7表示碰到投掷机器人\n            this.varHealth = this.varHealth - this.throwRobotData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if(other.tag == 8){\n            //tag==8表示碰到投掷机器人子弹\n            this.varHealth = this.varHealth - this.throwRobotData.bulletAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if(other.tag == 9){\n            //tag==7表示碰到重水飞船\n            this.varHealth = this.varHealth - this.heavyPlaneData.impactAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n        if(other.tag == 10){\n            //tag==8表示碰到重水飞船子弹\n            this.varHealth = this.varHealth - this.heavyPlaneData.bulletAttack;\n            if (this.varHealth < 0) {\n                this.varHealth = 0;\n            }\n        }\n\n    },\n\n    update(dt) {\n        this.updatePlanePos(dt);// 更新飞机位置\n        this.updateHealthBar();// 更新血条\n        this.updatePowerBar();// 更新能量条\n    },\n\n    onLoad() {\n        this.bulletInit(this.bullet[0]);\n    },\n\n\n});\n"]}